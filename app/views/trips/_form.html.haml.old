= simple_form_for :trip_proxy, :url => user_trips_path, :html => {:class => 'form-horizontal' } do |f|
  = f.input :from_place, label: t(:from), placeholder: t(:enter_address)
  - if @trip_proxy.from_place_results.count > 1
    = render :partial => 'alt_address_select', :locals => {:alt_addresses => @trip_proxy.from_place_results}
  
  = f.input :to_place, label: t(:to), placeholder: t(:enter_address)
  - if @trip_proxy.to_place_results.count > 1
    = render :partial => 'alt_address_select', :locals => {:alt_addresses => @trip_proxy.to_place_results}
    
= f.input :trip_date, wrapper: :append, label: t(:date) do
  = content_tag :div, id: 'trip-date' do
    = f.input_field :trip_date, as: :string, label: false, size: ""
    = content_tag :span, class: 'add-on' do
      = content_tag :i, '', class: 'icon-calendar'
      
= f.input :arrive_depart, collection: [:depart_at, :arrive_by],
  label_method: lambda {|obj| t(obj)},
  value_method: lambda {|obj| obj.to_s},
  label: false, include_blank: false, input_html: {class: ''}
  
= f.input :trip_time, wrapper: :append, label: t(:time) do
  = content_tag :div, id: 'trip-time' do
    = f.input_field :trip_time, as: :string, label: false, size: ""
    = content_tag :span, class: 'add-on' do
      = content_tag :i, '', class: 'icon-time'

.actions
  = f.button :submit, t(:plan_it), {class: 'btn btn-primary controls'}
  = link_to t(:cancel), :back
      
:javascript
  $('#trip-date').datepicker()
    .on("dateChange", function(e) {
      $('#trip_proxy_trip_date').val(Date.format(e.date, "mm/dd/yyyy"));
    });
  $('#trip-time').timepicker({
    'timeFormat': 'g:i a',
    'scrollDefaultTime': '9:00 am'
  })
    .on("changeTime", function(e) {
      $('#trip_proxy_trip_time').val($('#trip-time').data('ui-timepicker-value'));
    });
   $(document).ready(function(){
      $('.combobox').combobox({
        force_match: false
      });
    });
  $('.dropdown-toggle').dropdown();
  $('.trip_proxy_from_place_address a, .trip_proxy_to_place_address a').on('click', function(event) {
  var t = $(event.target)
    if (t.hasClass('place-option')) {
      $('#' + t.parents('ul').data('target')).val(t.data('value'))
    }
  })
