= render partial: 'layouts/messages'
.row-fluid
  .span12
    %h4 Add a new buddy
.row-fluid
  .span12
    = simple_form_for [current_user, @buddy_relationship], remote: true, html: { class: 'form-inline' } do |f|
      = f.error_notification
      = f.input :email_address, label: t(:buddys_email_address)
      = button_tag type: :submit, class: 'btn btn-primary controls' do
        %i.icon.icon-ok
        = t(:send_buddy_request)
.row-fluid
  .span12
    %h4 My buddies
.row-fluid
  .span12
    %table.table.table.condensed.table-striped.table-hover.table-bordered#buddiesdatatable
      %thead
        %tr
          %th.left Email address
          %th.left Status
          %th.left Sent
          %th.center Actions
      %tbody
        - current_user.buddy_relationships.each do |buddy|
          %tr
            %td.left= buddy.email_address
            %td.left= buddy.status
            %td.left= distance_of_time_in_words_to_now(buddy.email_sent) + " ago"
            %td.center
              Actions TBD
              / = link_to details_trip_path(trip), {class: "btn btn-mini btn-success text-center"} do
              /   %i.icon-search
              /   =t(:view)

= render partial: 'shared/datatable_javascript', locals: { table_id: '#buddiesdatatable'}
